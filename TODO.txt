* read and write buffer
* catch all exceptions on top level
* fix tests
